<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />
<title>AirPlay Audio POSIX Source Release</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>AirPlay Audio POSIX Source Release</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph"><p>This document describes the process of porting AirPlay Audio to a new platform. It covers the component breakdown, recommended
steps, and issues you might run into while bringing up AirPlay.  It is intended for Developers who are planning to port AirPlay Audio
Receiver to their platform.</p></div>
<div class="paragraph"><p></br>
<strong>Document Info</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Version: <tt>1.1</tt></strong>
</p>
</li>
<li>
<p>
<strong>Date: <tt>2013-08-21 09:16:58 PDT</tt></strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
<div class="sect1">
<h2 id="Glossary">Glossary</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="80%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="18%" />
<col width="81%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Accessory</strong></p></td>
<td align="left" valign="top"><p class="table">Receiver-side of an AirPlay session (e.g. Speaker).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>ALAC</strong></p></td>
<td align="left" valign="top"><p class="table">Apple Lossless Audio Codec <a href="#REF5">[REF5]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Binary Plist</strong></p></td>
<td align="left" valign="top"><p class="table">Binary format for an Apple Property List <a href="#REF3">[REF3]</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Bonjour</strong></p></td>
<td align="left" valign="top"><p class="table">Apple&#8217;s zero-configuration network discovery technology <a href="#REF1">[REF1]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Controller</strong></p></td>
<td align="left" valign="top"><p class="table">Initiator device or the sender-side of an AirPlay session (e.g. iPhone).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>CoreFoundation</strong></p></td>
<td align="left" valign="top"><p class="table">Apple&#8217;s API for collectons, numbers, strings, preferences, property lists, etc. <a href="#REF2">[REF2]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Curve25519</strong></p></td>
<td align="left" valign="top"><p class="table">Elliptic curve Diffie-Hellman key agreement protocol. <a href="#REF8">[REF8]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>DACP</strong></p></td>
<td align="left" valign="top"><p class="table">Digital Audio Control Protocol. Used by AirPlay for some forms of playback control.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>mDNSResponder</strong></p></td>
<td align="left" valign="top"><p class="table">Open Source Bonjour implementation <a href="#REF1">[REF1]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>MFi</strong></p></td>
<td align="left" valign="top"><p class="table">Apple&#8217;s Made for iPhone/iPod/iPad licensing program. <a href="#REF6">[REF6]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>MFi-SAP</strong></p></td>
<td align="left" valign="top"><p class="table">MFi Secure Association Protocol</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>PCM</strong></p></td>
<td align="left" valign="top"><p class="table">Pulse-code modulation encoding for uncompressed audio.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>POSIX</strong></p></td>
<td align="left" valign="top"><p class="table">Portable Operating System Interface <a href="#REF9">[REF9]</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Wireless Accessory Configuration</strong></p></td>
<td align="left" valign="top"><p class="table">Protocol for getting AirPlay accessories configured.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
<div class="sect1">
<h2 id="Project_Contents">1. Project Contents</h2>
<div class="sectionbody">
<div class="paragraph"><p>Apple&#8217;s AirPlay Audio POSIX Source release contains the POSIX compliant AirPlay stack which can be ported onto a new platform by
implementing the necessary interfaces detailed in this document. The source code release contains the following:</p></div>
<div class="sect2">
<h3 id="_directory_structure_overview">1.1. Directory Structure Overview</h3>
<div class="paragraph"><p></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Release
├── Documentation/
│   └── index.html
├── External/
│   ├── AppleLossless/
│   ├── Curve25519/
│   ├── GladmanAES/
│   └── WirelessAccesssoryConfiguration/
├── Platform/
│   └── Makefile
├── Sources/
└── Support/</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_directory_structure_details">1.2. Directory Structure Details</h3>
<div class="tableblock">
<table rules="rows"
style="margin-left:0; margin-right:auto;"
width="90%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="30%" />
<col width="69%" />
<thead>
<tr>
<th align="left" valign="top"> Location</th>
<th align="left" valign="top"> Content</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Documentation/">Documentation/</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing documentation.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Makefile">Makefile</a></tt></p></td>
<td align="left" valign="top"><p class="table">AirPlay Makefile.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources">Sources/</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing the Apple AirPlay source files</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Support">Support/</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing supporting source files for the Apple AirPlay code</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../External">External</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing all Open/Licensed Source external code used by AirPlay/Accessory.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Platform">Platform/</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing the example platform implementations</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Platform/OSX_POSIX_Stubs">Platform/OSX_POSIX_Stubs/</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing a platform implementation that builds and links on Mac OS X 10.8 or laterincluding a stubbed out platform implementation</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Platform/OSX_POSIX_Stubs/Platform.include.mk">Platform/OSX_POSIX_Stubs/Platform.include.mk</a></tt></p></td>
<td align="left" valign="top"><p class="table">Example platform specific Makefile that is included in the main AirPlay Makefile to build the Mac OS X stubbed out platform implementation</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Platform/OSX_POSIX_No_Stubs">Platform/OSX_POSIX_No_Stubs/</a></tt></p></td>
<td align="left" valign="top"><p class="table">Directory containing a platform implementation that builds (but does not link) on Mac OS X 10.8 or later. This should illustrate the functions that need platform implementations</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt><a href="../Platform/OSX_POSIX_No_Stubs/Platform.include.mk">Platform/OSX_POSIX_No_Stubs/Platform.include.mk</a></tt></p></td>
<td align="left" valign="top"><p class="table">Example platform specific Makefile that is included in the main AirPlay Makefile to build the Mac OS X non-linking platform implementation</p></td>
</tr>
<tr>
<td colspan="2" align="left" valign="top"><p class="table"><tt><tt><span class="black red-background"><strong>&#160;NOTE:&#160;</strong> The developer should only modify source in the <a href="../Platform">Platform</a> directory.</span></tt></tt></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Porting_Overview">2. Porting Overview</h2>
<div class="sectionbody">
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<strong>Set up a toolchain for compiling and linking code.</strong><br />
</p>
<div class="paragraph"><p>Set up the compilers, linkers, and the tools needed to compile the source code for the intended target platform.</p></div>
</li>
<li>
<p>
<strong>Port Bonjour.</strong><br />
</p>
<div class="paragraph"><p>AirPlay requires Bonjour stack to operate. Please refer to <a href="https://developer.apple.com/bonjour/">https://developer.apple.com/bonjour/</a> for information on porting Bonjour to your platform.</p></div>
</li>
<li>
<p>
<strong>Create Platform directory from PlatformStub.</strong><br />
</p>
<div class="paragraph"><p>Make a copy of the  Platform/PlatformStub directory for the target platform. This will provide a starting point for the platform
implementation for AirPlay for your target.</p></div>
</li>
<li>
<p>
<strong>Update Platform Include Makefile .</strong><br />
</p>
<div class="paragraph"><p>Update the Platform.include.mk file to provide information regarding the toolset, librariy paths, include paths etc. Refer to the
Platform.include.mk file for more details.</p></div>
</li>
<li>
<p>
<strong>Complete the implementation of the platform interfaces required by AirPlay.</strong><br />
</p>
<div class="paragraph"><p>Implement the interfaces required by AirPlay on top of  the OS/Platform specific APIs of the target. The stub implementation
provided in PlatformStub directory will provide a good starting point for this.</p></div>
</li>
<li>
<p>
<strong>Build AirPlay and the platform implementation .</strong><br />
</p>
<div class="paragraph"><p>Build AirPlay and the platform implementation for the target platform. AirPlay can be compiled/linked on
the platform implementation as an executable or a library. See <a href="#Building">Building AirPlay</a> for more details.</p></div>
</li>
</ol></div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
<div class="sect1">
<h2 id="Interfaces">3. Interfaces</h2>
<div class="sectionbody">
<div class="paragraph"><p>AirPlay requires various interfaces to be implemented by the Platform and it provides a few interfaces for Platform to call. This
section provides an overview of the various interfaces involved.</p></div>
<div class="tableblock">
<table rules="rows"
style="margin-left:0; margin-right:auto;"
width="98%"
frame="hsides"
cellspacing="0" cellpadding="4">
<caption class="title">Table 1. Called from AirPlay source into developer code</caption>
<col width="26%" />
<col width="13%" />
<col width="60%" />
<thead>
<tr>
<th align="left" valign="top"> <strong>Interface</strong></th>
<th align="left" valign="top"> <strong>Interface Header</strong></th>
<th align="left" valign="top"> <strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Preferences_Interface">Preferences Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/CFCompat.h">Support/CFCompat.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for Preference information purposes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#System_Info_Interface">System Info Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/SystemUtils.h">Support/SystemUtils.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for system information purposes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#MFi_SAP_Interface">MFi SAP Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/MFiSAP.h">Support/MFiSAP.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for MFi SAP purposes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Server_Platform_Interface">Server Platform Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources/AirPlayReceiverServer.h">Sources/AirPlayReceiverServer.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for airplay server purposes </br> <strong><span class="small"><em>Sample implementation provided</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Session_Platform_Interface">Session Platform Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources/AirPlayReceiverSession.h">Sources/AirPlayReceiverSession.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for airplay session purposes </br> <strong><span class="small"><em>Sample implementation provided</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Tick_Interface">Tick Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/TickUtils.h">Support/TickUtils.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for tick related purposes.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Random_Bytes_Interface">Random Bytes Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/RandomNumberUtils.h">Support/RandomNumberUtils.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for Random Bytes purposes.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Atomic_Operation_Interface">Atomic Operations Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/AtomicUtils.h">Support/AtomicUtils.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for atomic operation purposes. </br> <strong><span class="small"><em>GCC implementation provided</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#AES_Interface">AES Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/AESUtils.h">Support/AESUtils.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for AES operation purposes. </br> <strong><span class="small"><em>openssl compatible</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Audio_Interface">Audio Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Support/AudioUtils.h">Support/AudioUtils.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for audio rendering purposes.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Network Interface</strong></p></td>
<td align="left" valign="top"><p class="table"><tt></tt></p></td>
<td align="left" valign="top"><p class="table">Called by AirPlay for network/interface related purposes. </br> <strong><span class="small"><em>POSIX compliant</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>Bonjour Interface</strong></p></td>
<td align="left" valign="top"><p class="table"><tt></tt></p></td>
<td align="left" valign="top"><p class="table">Bonjour Library Interface APIs </br> <strong><span class="small"><em>Open Source distribution available</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>POSIX Interface</strong></p></td>
<td align="left" valign="top"><p class="table"><tt></tt></p></td>
<td align="left" valign="top"><p class="table">POSIX compliant APIs called by AirPlay for OS, network &amp; standard library purposes  </br> <strong><span class="small"><em>POSIX compliant</em></span></strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p></br></p></div>
<div class="tableblock">
<table rules="rows"
style="margin-left:0; margin-right:auto;"
width="98%"
frame="hsides"
cellspacing="0" cellpadding="4">
<caption class="title">Table 2. Called from developer code into AirPlay source</caption>
<col width="26%" />
<col width="13%" />
<col width="60%" />
<thead>
<tr>
<th align="left" valign="top"> <strong>Interface</strong></th>
<th align="left" valign="top"> <strong>Interface Header</strong></th>
<th align="left" valign="top"> <strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Initialization_Interface">Initialization Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources/AirPlayMain.h">Sources/AirPlayMain.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">to be called by Developer to kickoff/shutdown AirPlay</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#DACP_Callback_Interface">DACP Callback Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources/AirPlayReceiverServer.h">Sources/AirPlayReceiverServer.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">to be called by Developer to notify AirPlay about User interaction</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Audio_Callback_Interface">Audio Callback Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources/AirPlayReceiverSession.h">Sources/AirPlayReceiverSession.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">to be called by Developer for audio feeding purposes </br> <strong><span class="small"><em>Sample implementation provided</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Platform_Callback_Interface">Platform Callback Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt><a href="../Sources/AirPlayReceiverServer.h">Sources/AirPlayReceiverServer.h</a></tt></p></td>
<td align="left" valign="top"><p class="table">to be called by Developer in response to AIrPlay Platform calls </br> <strong><span class="small"><em>Sample implementation provided</em></span></strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong><a href="#Core_Foundation_Interface">Core Foundation Interface</a></strong></p></td>
<td align="left" valign="top"><p class="table"><tt></tt></p></td>
<td align="left" valign="top"><p class="table">Core Foundation support API(s) to be used by Developer to implement AirPlay Platform Interface</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p></br>
</br></p></div>
</div>
</div>
<div class="sect1">
<h2 id="Porting_Notes">4. Porting Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_audio_rendering">4.1. Audio Rendering</h3>
<div class="paragraph"><p>AirPlay Stack on the accessory receives the audio stream from the sender device over the network and does the necessary processing
on it, before handing audio samples over to the Platform for rendering. Platform should implement the Audio Interface
<a href="AudioUtils_h/index.html">Audio Interface</a> to receive the audio samples and render it using the audio hardware.</p></div>
<div class="paragraph"><p>AirPlay will call Platform to:</p></div>
<div class="ulist"><ul>
<li>
<p>
create an audio stream
</p>
</li>
<li>
<p>
configure it with flags, format of the samples, preferred latency, audio callback, etc.
</p>
</li>
<li>
<p>
Start the stream.
</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_audio_buffers">4.1.1. Audio Buffers</h4>
<div class="paragraph"><p>Platform should allocate audio buffers and then create a separate thread which will do the audio sample retrieval from the AirPlay
core and then get it rendered by the audio hardware.  Platform implementation should use 2 or 3 buffers for audio samples. The size
of the buffer should depend on the preferred latency, but should be generally less than 50 ms.  Smaller and fewer buffers reduces
latency since the minimum latency is the number of samples in each buffer times the number of buffers plus any latency introduced by
the driver and/or hardware.  Smaller buffers can increase CPU usage because it needs to wake up the CPU to supply data more
frequently. It also increases the likelihood of the hardware running dry and dropping audio if there are thread scheduling delays
that prevent the audio thread from running in time to provide new samples to the hardware.</p></div>
</div>
<div class="sect3">
<h4 id="_rendering_thread">4.1.2. Rendering Thread</h4>
<div class="paragraph"><p>The audio rendering thread should call AudioStremAudioCallback_f() function provided by AirPlay to retrieve the audio samples, and
then feed the received samples to the audio hardware for rendering. As each buffer completes rendering in the
hardware, it should reuse the buffer by calling the AudioStremAudioCallback_f() to retrieve more data. It should then re-schedules the buffer with the
audio hardware to play when the current buffer is finished. This process should repeat as long as the audio stream is started.</p></div>
<div class="paragraph"><p>Timing is important for proper synchronization of audio. When the AudioStremAudioCallback_f() is invoked by the Platform, it should
provides the sample number for the first sample to be filled in and a host time in the future for when the first sample will be
heard. The host time should be as close as possible to when the sample will really be heard. If the hardware or driver supports it,
the sample time would come directly from the hardware&#8217;s playback position within the buffer. This can be correlated with a host time
by getting an accurate host time at the beginning of the audio buffer the hardware is playing.</p></div>
</div>
<div class="sect3">
<h4 id="_audio_format_specs">4.1.3. Audio Format Specs</h4>
<div class="paragraph"><p>AirPlay conveys the format of the audio samples being provided to the Platform by calling <tt>AudioStreamSetFormat()</tt>. The platform
should use the information specified by that API to setup the audio hardware for audio rendering. The charecteristic of audio
samples provided by AirPlay currently are:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        Format      : PCM
        Sample Rate : 44100
        Sample Size : 16 bit
        Channels    : 2 (Stereo)
        Sign        : Signed
        Byte Order  : Host Byte Order</tt></pre>
</div></div>
<div class="paragraph"><p>Note that AirPlay may support/add more audio formats in the future. So Platfrom implementations should ensure that it does not use
hardcoded setting and instead use the information provided by <tt>AudioStreamSetFormat()</tt> when setting up the audio hardware.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_airplay_password">4.2. AirPlay Password</h3>
<div class="paragraph"><p>AirPlay supports optionally requiring a password to initiate playback to the accessory. The accessory should provide a mechanism
(for ex. Web UI, setup app, device menu etc) to allow the user to set an AirPlay play password if needed. Once the user sets a
password on the accessory, AirPlay will confirm the password on the sender device when streaming is initiated to the password
protected accessory. Note that the accessory should have password disabled by default and the user can set up the password if
desired.</p></div>
<div class="paragraph"><p>AirPlay will use <tt>CFPreferencesCopyAppValue_compat(kAirPlayPrefKey_PlayPassword)</tt> during the password verification process to
retrieve the password from Platform implementation.</p></div>
</div>
<div class="sect2">
<h3 id="_atomic_operations">4.3. Atomic Operations</h3>
<div class="paragraph"><p>AirPlay uses the Atomic Operation Interface for lock-free atomic operations, such as incrementing an integer, compare-and-swap, etc.
GCC based implementation of these functions are provided. If the toolset for the target platform is not based on GCC, porting is
required, and the following functions need to be implemented in an atomic, and ideally lock-free, manner.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>        int32_t atomic_add_and_fetch_32( int32_t *inPtr, int32_t inVal );

        Boolean atomic_bool_compare_and_swap_32( int32_t *inPtr, int32_t inOldValue, int32_t inNewValue );

        int32_t atomic_fetch_and_and_32( int32_t *inPtr, int32_t inVal );

        int32_t atomic_fetch_and_or_32( int32_t *inPtr, int32_t inVal );

        void atomic_read_write_barrier( void );

        int32_t atomic_sub_and_fetch_32( int32_t *inPtr, int32_t inVal );

        int32_t atomic_val_compare_and_swap_32( int32_t *inPtr, int32_t inOldValue, int32_t inNewValue );

        void atomic_yield( void );</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_mfi_authentication_and_encryption">4.4. MFi Authentication and Encryption</h3>
<div class="paragraph"><p>AirPlay accessories are required to have an MFi authentication IC so the controller can authenticate and set up encrypted
communication with the accessory. The authentication and encryption protocol is provided as portable code that should work on any
platform. Access to the MFi authentication IC is different for each platform.  The following functions need to be implemented to
provide the require MFi feaures to AirPlay. For detailed API documentation see MFiSAP.h.</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        OSStatus MFiPlatform_Initialize( void );

        void MFiPlatform_Finalize( void );

        OSStatus MFiPlatform_CopyCertificate( uint8_t **outCertificatePtr, size_t *outCertificateLen );</tt></pre>
</div></div>
<div class="paragraph"><p>These functions are called when the Apple software stack needs to interact with the MFi Authentication Coprocessor. Please refer to
the relevant version of the "Auth IC" document to obtain more details on how to interact with the Authentication Coprocessor. This
document can be found on the MFi Portal.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph"><p><strong>Tips for interacting with the MFi Authentication Coprocessor</strong><br />
It is important to implement a robust error detection and retry scheme when interacting with the coprocessor over the I2C interface.
See the following sections of the AuthIC documentation for more information:</p></div>
<div class="ulist"><ul>
<li>
<p>
NACK Responses Replace Clock Stretching
</p>
</li>
<li>
<p>
Automatic Sleep State Entry and Exit
</p>
</li>
</ul></div>
</div></div>
</div>
<div class="sect2">
<h3 id="_random_bytes">4.5. Random Bytes</h3>
<div class="paragraph"><p>AirPlay uses Random numbers Interface for cryptographic key exchange and various other purposes. All random numbers go through a
single API, RandomBytes(). This API generates N bytes of cryptographic random data. The following function needs to be implemented
based on the platform/OS being ported to. This implementation must generate cryptographic random numbers (e.g. can&#8217;t use ANSI
rand(), POSIX random(), etc.). If there is not enough entropy to satisfy the request, it must block until sufficient entropy is
available.  should not return an error in that case).  Here&#8217;s the API definition</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        OSStatus RandomBytes( void *inBuffer, size_t inByteCount );</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_system_preferences_amp_information">4.6. System Preferences &amp; Information</h3>
<div class="paragraph"><p>AirPlay needs system preferences/information like device name, manufacturer name etc for its normal operation. It uses Preferences
Interface to read initial settings (e.g. factory default name of accessory) as well as write changes to the configuration (e.g.
user-configured password to AirPlay to the accessory). For POSIX platforms with access to a file system, an implementation to
read/write files is provided. Files are in Apple&#8217;s binary plist format <a href="#REF3">[REF3]</a>.</p></div>
<div class="paragraph"><p>If your platform doesn&#8217;t have access to a file system or doesn&#8217;t support the POSIX file APIs, the following functions need to be
implemented. For detailed API documentation, see the CFPreferences documentation <a href="#REF4">[REF4]</a>.</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        CFPropertyListRef CFPreferencesCopyAppValue_compat( CFStringRef inKey, CFStringRef inAppID );

        void CFPreferencesSetAppValue_compat( CFStringRef inKey, CFPropertyListRef inValue, CFStringRef inAppID );</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_high_resolution_tick">4.7. High Resolution Tick</h3>
<div class="paragraph"><p>AirPlay requires TickUtils provides high resolution timing. This is based on a simple tick counter, such as the processor cycle counter in many CPUs.
The following two functions need to be implemented based on the platform/OS being ported to.</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        uint64_t UpTicks( void )
                Return the current value of the tick counter.

        uint64_t UpTicksPerSecond( void )
                Return the number of ticks in a second.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_remote_control_of_airplay_streaming_by_accessory_user">4.8. Remote Control of AirPlay Streaming by Accessory/User</h3>
<div class="paragraph"><p>AirPlay Product Definition <a href="#REF11">[REF11]</a> specifies the various remote operations allowed from an AirPlay Audio Accessory - usually as a
result of the user interacting with the accessory via an input device like remote control or accessory buttons/keys.</p></div>
<div class="paragraph"><p>When the user uses the input device to control AirPlay (for ex. pausing playback, moving to the next song in a playlist, etc.),
Developer should use <tt>AirPlayReceiverServerSendDACPCommand()</tt> to send appropriate DACP commands, which will then be sent from the
accessory to the controller. Developer should pass the DACP command string, which conveys the operation requested, as input parameter.</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        OSStatus AirPlayReceiverServerSendDACPCommand( AirPlayReceiverServerRef inServer, const char *inDACPCommand );</tt></pre>
</div></div>
<div class="paragraph"><p>There are cases where the accessory may need to know if a DACP command succeeded or not. For example, if the accessory is indicating
it&#8217;s in a paused state and a resume is attempted and fails (e.g. controller was powered off or moved out of range) then it can use
the command failure to indicate playback is no longer paused. DACP command status is delivered via the platform&#8217;s
<tt>AirPlayReceiverServerPlatformControl()</tt> function with the following event:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>        kAirPlayEvent_DACPStatus -- Event to indicate DACP command status.
        kAirPlayKey_Status       -- Status of the command. This is a key in the params dictionary.</tt></pre>
</div></div>
<div class="paragraph"><p>The table below lists the various operations and the corresponding DACP command string to be passed to
<tt>AirPlayReceiverServerPlatformControl()</tt> by the developer:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>        Action                  DACP Command String                             Comment
        ------                  -------------------                             -------
        Play                    "play"                          Start playback of the current AirPlay session.
        Stop                    "stop"                          Stop playback of the current AirPlay session.
        Pause                   "pause"                         Pause playback of the current AirPlay session.
        Pause Toggle            "playpause"                     Toggle between play and pause of current AirPlay session.
        Next Item               "nextitem"                      Go to the next song in the iTunes playlist.
        Previous Item           "previtem"                      Go to the previous song in the iTunes playlist.
        Repeat Toggle           "repeatadv"                     Repeat Advance.
        Shuffle Toggle          "shuffletoggle"                 Shuffle Toggle.
        Mute Toggle             "mutetoggle"                    Mute Toggle.
        Volume Up               "volumeup"                      Raise the volume of the current AirPlay session.
        Volume Down             "volumedown"                    Lower the volume of the current AirPlay session.</tt></pre>
</div></div>
<div class="paragraph"><p>See <tt>DACPCommon.h</tt> for symbolic constants that can be used by Developer for the above DACP commands.</p></div>
</div>
<div class="sect2">
<h3 id="Building">4.9. Building AirPlay</h3>
<div class="paragraph"><p>AirPlay provides a <a href="../Makefile"><tt><strong>Makefile</strong></tt></a> which should be used to compile/build all AirPlay related code.</p></div>
<div class="paragraph"><div class="title">Make Targets</div><p>The following targets are supported when building AirPlay:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
 
</dt>
<dd>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<tt><strong>airplayd</strong></tt>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
    Build airplay executable.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<tt><strong>airplaylib</strong></tt>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
    Build airplay Library.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<tt><strong>clean</strong></tt>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
    Cleans all airplay related objects.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<tt><strong>help</strong></tt>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
    Prints out help page reagarding targets supports and command examples.
</p>
</td>
</tr>
</table></div>
</dd>
</dl></div>
<div class="paragraph"><div class="title">Make Options</div><p>The following options are supported when building AirPlay Makefile. Passing <tt>&lt;option&gt;=1</tt> as argument to the <tt>make</tt> command line
would enable the options listed below:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
 
</dt>
<dd>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<tt><strong>debug</strong></tt>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
    Build airplay in debug mode. This will enable symbol table and avoid optimization and stripping.
</p>
</td>
</tr>
</table></div>
</dd>
</dl></div>
<div class="paragraph"><div class="title">Makefile Variables</div><p>AirPlay Makefile does not contain any information regarding accessory toolset and build environment. It expects the developer to
provide information related to build environment and toolset when executing the Makefile.  Refer to the sample platform include
makefile <a href="../Platform/OSX_POSIX_Stubs/Platform.include.mk"><tt><strong>Platform.include.mk</strong></tt></a> for more details regarding the makefile
variables to be provided by the developer. Developer can provide the neccessary build environment/toolset information in two
different ways:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
 
</dt>
<dd>
<p>
<strong>Platform Include makefile</strong><br />
The developer can provide a platform include makefile, containing the necessary build environment information, as
a parameter to <tt>make</tt> command. The command line to be used for this is:
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
 
</dt>
<dd>
<p>
<tt><strong>make platform_makefile=&lt;path_to_Patform.Include.mk&gt; ...</strong></tt>
</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
 
</dt>
<dd>
<p>
<em>OR</em>
</p>
</dd>
<dt class="hdlist1">
 
</dt>
<dd>
<p>
<strong>Makefile variable export</strong><br />
The developer can call the AirPlay Makefile from another platform makefile. In this usage scenario, the developer can export all the
make variables required by AirPlay makefile and then invoke AirPlay Makefile.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Refer to the sample platform include makefile <a href="../Platform/OSX_POSIX_Stubs/Platform.include.mk"><tt><strong>Platform.include.mk</strong></tt></a> for
more details regarding the makefile variables to be provided by the developer.</td>
</tr></table>
</div>
<div class="ulist"><div class="title">Make Examples</div><ul>
<li>
<p>
Build debug mode AirPlay execuable<br />
    <tt><strong>make platform_makefile=&lt;path_to_Patform.Include.mk&gt; debug=1 airplayd</strong></tt>
</p>
</li>
<li>
<p>
Build non-debug mode AirPlay library<br />
    <tt><strong>make platform_makefile=&lt;path_to_Patform.Include.mk&gt; airplaylib</strong></tt>
</p>
</li>
<li>
<p>
Clean AirPlay<br />
    <tt><strong>make platform_makefile=&lt;path_to_Patform.Include.mk&gt; clean</strong></tt>
</p>
</li>
<li>
<p>
Get help about building AirPlay<br />
    <tt><strong>make platform_makefile=&lt;path_to_Patform.Include.mk&gt; help</strong></tt>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="Executable_Library">4.10. Running AirPlay - Standalone Daemon?</h3>
<div class="paragraph"><p>Developer should determine based on the accessory platform charecteristics, whether to run AirPlay as a separate standalone Daemon
or as part of another platform process. AirPlay Makefile allows the Developer to build AirPlay as an executable or as a library as
detailed in the section above.</p></div>
<div class="ulist"><div class="title">Daemon</div><ul>
<li>
<p>
Make AirPlay Makefile target <tt>airplayd</tt> to create an AirPlay executable.<br />
</p>
</li>
<li>
<p>
AirPlay executable will be created with the name <tt><strong>airplayd</strong></tt>
</p>
</li>
<li>
<p>
Developer should kickoff the AirPlay executable as a separate daemon (<tt><strong>airplayd --daemon</strong></tt>) during platform bootup.
</p>
</li>
<li>
<p>
Developer should kickoff Bonjour daemon before kicking off AirPlay Daemon.
</p>
</li>
</ul></div>
<div class="ulist"><div class="title">Library</div><ul>
<li>
<p>
Make AirPlay Makefile target <tt>airplaylib</tt> to create an AirPlay library.<br />
</p>
</li>
<li>
<p>
AirPlay library will be created with the name <tt><strong>airplaylib.a</strong></tt>, which should be linked to a patform executable.
</p>
</li>
<li>
<p>
Developer should kickoff AirPlay by calling <tt>AirPlayMain()</tt> as part of another platform daemon.
</p>
</li>
<li>
<p>
Developer should kickoff Bonjour before kicking off AirPlay library.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Platforms which do not support the notion of multiple processes and address spaces will have to build AirPlay as a library.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="External_Source">4.11. External Source</h3>
<div class="paragraph"><p>The following Open/Licensed source projects are used by the AirPlay source release. Source code for some of the below is included
with the AirPlay POSIX source release (<a href="../External/"><tt>External/</tt></a>). Any modifications to the original source are also described in the following sections.</p></div>
<div class="paragraph"><div class="title">Bonjour <a href="#REF1">[REF1]</a>::</div><p>Bonjour is Apple&#8217;s zero-configuration networking wich enables automatic discovery of devices and services on a local network using
industry standard IP protocols. AirPlay uses Bonjour for its accessory discovery purposes and links to the <tt>libdns</tt> library.
</br></br>The developer should port mDNSResponder (Apple&#8217;s bonjour implementaion), which is available as Open Source, to
the accessory platform.  Refer to <a href="https://developer.apple.com/bonjour/">https://developer.apple.com/bonjour/</a> for more details on porting mDNSResponder.</p></div>
<div class="paragraph"><p></br></p></div>
<div class="paragraph"><div class="title">Apple Lossless Audio Codec (ALAC) <a href="#REF5">[REF5]</a>::</div><p>The Apple Lossless Audio Codec (ALAC) is an audio codec developed by Apple and supported on iPhone, iPad, most iPods, Mac and
iTunes.  ALAC is a data compression method which reduces the size of audio files with no loss of information. A decoded ALAC stream
is bit-for-bit identical to the original uncompressed audio file.
</br></br>AirPlay uses ALAC decoder on the accessory side for streaming purposes. The AirPlay Source Release includes
the ALAC source code (<a href="../External/AppleLossless"><tt>External/AppleLossless/</tt></a>) as needed for accessory features.
Refer to <a href="http://alac.macosforge.org">http://alac.macosforge.org</a> for more detais on ALAC and its Open Source release.</p></div>
<div class="paragraph"><p></br></p></div>
<div class="paragraph"><div class="title">Apple Wireless Accessory Configuration (WAC)::</div><p>Wireless Accessory Configuration (WAC) is an Apple proprietary configuration protocol/process which allows a controlling device,
such as an iPhone, to send configuration information to the accessory and have the accessory configure itself. This includes joining
a WiFi network, specifying the name the accessory should appear as, etc.
</br></br>Develoeprs should use WAC on their AirPlay Accessories to provide an enhanced user experience when interacting
with the accessory. Apple provides Developers access to WAC as Licensed Source Release as part of the MFi Program <a href="#REF6">[REF6]</a>.
Refer to Developer MFi Portal for more details on porting WAC to the accessory platform. Refer to
<a href="http://https://developer.apple.com/programs/mfi">http://https://developer.apple.com/programs/mfi</a> for more details about Apple MFi Program.
</br></br>Note: AirPlay does not directly use WAC feature or source code.</p></div>
<div class="paragraph"><p></br></p></div>
<div class="paragraph"><div class="title">GladmanAES <a href="#REF7">[REF7]</a>::</div><p>AirPlay Source Release uses/contains a modified version (<a href="../External/GladmanAES/"><tt>External/GladmanAES/</tt></a>) of GladmanAES Open
Source release for its encryption/decryption purposes.
</br></br>The following modifications have been made to the Open Source release of GladmanAES to better suit AirPlay needs:</p></div>
<div class="ulist"><ul>
<li>
<p>
Added support for in-place encrypt/decrypt.
</p>
</li>
<li>
<p>
Added support for working without ACE support.
</p>
</li>
<li>
<p>
Fixes for endian detection.
</p>
</li>
<li>
<p>
Fixes for compiling on different compilers, 64-bit, etc.
</p>
</li>
<li>
<p>
Fixes for warnings.
</p>
</li>
</ul></div>
<div class="paragraph"><p></br></p></div>
<div class="paragraph"><div class="title">Curve25519 <a href="#REF8">[REF8]</a>::</div><p>AirPlay Source Release uses/contains a modified version (<a href="../External/Curve25519/"><tt>External/Curve25519/</tt></a>) of Curve25519 Open
Source release for its Public Key purposes.
</br></br>The following modifications have been made to the Open Source release of Curve25519 to better suit AirPlay needs:</p></div>
<div class="ulist"><ul>
<li>
<p>
Added default basepoint.
</p>
</li>
<li>
<p>
Fixes for misaligned access.
</p>
</li>
<li>
<p>
Fixes for compiling on different compilers, 64-bit, etc.
</p>
</li>
<li>
<p>
Fixes for warnings.
</p>
</li>
</ul></div>
<div class="paragraph"><p></br></p></div>
</div>
<div class="sect2">
<h3 id="POSIX">4.12. POSIX Interface</h3>
<div class="paragraph"><p>AirPlay uses POSIX compliant APIs for various purposes like:</p></div>
<div class="ulist"><ul>
<li>
<p>
OS fuctionalities
</p>
<div class="ulist"><ul>
<li>
<p>
Threads
</p>
</li>
<li>
<p>
Memory
</p>
</li>
<li>
<p>
Mutex
</p>
</li>
<li>
<p>
Semaphores
</p>
</li>
<li>
<p>
Conditional Variable
</p>
</li>
<li>
<p>
File descriptor
</p>
</li>
</ul></div>
</li>
<li>
<p>
Network Operations
</p>
<div class="ulist"><ul>
<li>
<p>
Socket
</p>
</li>
<li>
<p>
Bind/Connect/Accept
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>Developer is responsible for providing the suitable libraries for the POSIX complant implementation on the accessory platform. Refer
to the list of <a href="#Dependancies">POSIX Dependancies</a> section below for details on POSIX interfaces required by AirPlay.</p></div>
<div class="sect3">
<h4 id="Dependancies">4.12.1. List of POSIX Dependancies</h4>
<div class="paragraph"><p></p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
 
</dt>
<dd>
<p>
<strong><span class="red">TODO</span></strong>
</p>
</dd>
</dl></div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Sample_Implementations">5. Sample Implementations</h2>
<div class="sectionbody">
<div class="paragraph"><p>These implementations will be a good starting point for the developer implementation.</p></div>
<div class="sect2">
<h3 id="_osx_posix_no_stubs">5.1. OSX_POSIX_No_Stubs</h3>
<div class="paragraph"><p>This sample implementation will compile the AirPlay files and fail to link on the functions the platform developer needs to implement on the Mac OS X 10.8 (or later) platform.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
To make this example
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
Move to the top level source directory
</p>
</li>
<li>
<p>
Run make
</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><tt>make platform_makefile=Platform/OSX_POSIX_No_Stubs/Platform.include.mk</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_osx_posix_stubs">5.2. OSX_POSIX_Stubs</h3>
<div class="paragraph"><p>This sample implementation will compile the AirPlay files and link to the sample stub implementations of the functions the platform developer needs to implement on the Mac OS X 10.8 (or later) platform.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
To make this example
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
Move to the top level source directory
</p>
</li>
<li>
<p>
Run make
</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><tt>make platform_makefile=Platform/OSX_POSIX_Stubs/Platform.include.mk</tt></pre>
</div></div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="API_Documentation">6. API Documentation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Preferences_Interface">6.1. Preferences Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "CFCompat.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for Preference information purposes</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="CFCompat_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/CFCompat.h.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="System_Info_Interface">6.2. System Info Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "SystemUtils.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for system information purposes</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="SystemUtils_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/SystemUtils.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="MFi_SAP_Interface">6.3. MFi SAP Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">&#160;&#160;&#160;&#160;#include "MFiSAP.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for MFi Authentication purposes</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="MFiSAP_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/MFiSAP.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Server_Platform_Interface">6.4. Server Platform Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AirPlayReceiverServer.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for Server purposes</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AirPlayReceiverServer_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Sources/AirPlayReceiverServer.h">Header</a>
</p>
</li>
<li>
<p>
<span class="small">Sample implementation provided.</span>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Session_Platform_Interface">6.5. Session Platform Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AirPlayReceiverSession.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for Session purposes</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AirPlayReceiverSession_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Sources/AirPlayReceiverSession.h">Header</a>
</p>
</li>
<li>
<p>
<span class="small">Sample implementation provided.</span>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Tick_Interface">6.6. Tick Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "TickUtils.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for timer tick related purposes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="TickUtils_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/TickUtils.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Random_Bytes_Interface">6.7. Random Bytes Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "RandomNumberUtils.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for random bytes purposes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="RandomNumberUtils_h/index.html">API details</a>
</p>
</li>
<li>
<p>
<a href="../Support/RandomNumberUtils.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Atomic_Operation_Interface">6.8. Atomic Operation Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AtomicsUtils.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for atomic operation purposes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AtomicUtils_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/AtomicUtils.h">Header</a>
</p>
</li>
<li>
<p>
<span class="small">GCC based implementation provided.</span>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="AES_Interface">6.9. AES Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AESUtils.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay for AES encryption/decryption purposes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AESUtils_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/AESUtils.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Audio_Interface">6.10. Audio Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AudioUtils.h"</span></tt></p></div>
<div class="paragraph"><p>APIs called by AirPlay related to Audio rendering on the accessory.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AudioUtils_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Support/AudioUtils.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Bonjour_Interface">6.11. Bonjour Interface</h3>
<div class="paragraph"><p>Bonjour Library Interface APIs</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<span class="small">Open Source distribution available.</span>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="POSIX_Interface">6.12. POSIX Interface</h3>
<div class="paragraph"><p>POSIX compliant APIs called by AirPlay for basic Operating System, network and standard library purposes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<span class="small">POSIX compliant.</span>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Initialization_Interface">6.13. InitiaizationInterface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AirPlayMain.h"</span></tt></p></div>
<div class="paragraph"><p>To be called by Developer to start and shut down AirPlay.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AirPlayMain_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Sources/AirPlayMain.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="DACP_Callback_Interface">6.14. DACP Callback Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "DACPCommon.h"</span></tt>
<tt><span class="silver-background">#include "AirPlayReceiverServer.h"</span></tt></p></div>
<div class="paragraph"><p>To be called by Developer to notify AirPlay about User interaction  with the accessory via input devices like remote control.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AirPlayReceiverServer_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Sources/AirPlayReceiverServer.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Audio_Callback_Interface">6.15. Audio Callback Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AirPlayReceiverSession.h"</span></tt></p></div>
<div class="paragraph"><p>To be called by Developer for audio sample retrieval.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AirPlayReceiverSession_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Sources/AirPlayReceiverSession.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Platform_Callback_Interface">6.16. Platform Callback Interface</h3>
<div class="paragraph"><p><tt><span class="silver-background">#include "AirPlayReceiverServer.h"</span></tt></p></div>
<div class="paragraph"><p>To be called by Developer in response to AirPlay Platform Interface calls</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="AirPlayReceiverServer_h/index.html">API Details</a>
</p>
</li>
<li>
<p>
<a href="../Sources/AirPlayReceiverServer.h">Header</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="Core_Foundation_Interface">6.17. Core Foundation Interface</h3>
<div class="paragraph"><p>Core Foundation support APIs to be called by Developer to implement AirPlay Platform Interface</p></div>
<div class="paragraph"><p></br></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">7. References</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<a id="REF1"></a>[REF1] mDNSResponder open source releases,<br />
<a href="http://www.opensource.apple.com/tarballs/mDNSResponder/">http://www.opensource.apple.com/tarballs/mDNSResponder/</a>
</p>
</li>
<li>
<p>
<a id="REF2"></a>[REF2] Core Foundation API,<br />
<a href="http://en.wikipedia.org/wiki/Core_Foundation">http://en.wikipedia.org/wiki/Core_Foundation</a>
</p>
</li>
<li>
<p>
<a id="REF3"></a>[REF3] Apple Property Lists,<br />
<a href="http://en.wikipedia.org/wiki/Property_list">http://en.wikipedia.org/wiki/Property_list</a>
</p>
</li>
<li>
<p>
<a id="REF4"></a>[REF4] CFPreferences,<br />
<a href="https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFPreferencesUtils/Reference/reference.html">https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFPreferencesUtils/Reference/reference.html</a>
</p>
</li>
<li>
<p>
<a id="REF5"></a>[REF5] Apple Lossless Audio Codec (ALAC),<br />
<a href="http://alac.macosforge.org">http://alac.macosforge.org</a>
</p>
</li>
<li>
<p>
<a id="REF6"></a>[REF6] Apple&#8217;s Made for iPhone/iPod/iPad licensing program,<br />
<a href="http://https://developer.apple.com/programs/mfi/">http://https://developer.apple.com/programs/mfi/</a>
</p>
</li>
<li>
<p>
<a id="REF7"></a>[REF7] GladmanAES,<br />
<a href="http://gladman.plushost.co.uk/oldsite/AES/">http://gladman.plushost.co.uk/oldsite/AES/</a>
</p>
</li>
<li>
<p>
<a id="REF8"></a>[REF8] Curve25519-donna,<br />
<a href="https://code.google.com/p/curve25519-donna/">https://code.google.com/p/curve25519-donna/</a>
</p>
</li>
<li>
<p>
<a id="REF9"></a>[REF9] POSIX - Portable Operating System Interface,<br />
<a href="http://en.wikipedia.org/wiki/POSIX">http://en.wikipedia.org/wiki/POSIX</a>
</p>
</li>
<li>
<p>
<a id="REF10"></a>[REF10] Advanced Encryption Standard,<br />
<a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">http://en.wikipedia.org/wiki/Advanced_Encryption_Standard</a>
</p>
</li>
<li>
<p>
<a id="REF11"></a>[REF11] AirPlay Product Definition Specification - Audio Streaming Devices,<br />
Available to Developer under MFi Licensing.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2013-08-21 09:16:58 PDT
</div>
</div>
</body>
</html>
